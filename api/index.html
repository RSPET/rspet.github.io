<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>API - RSPET</title>
  

  <link rel="shortcut icon" href="../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "API";
    var mkdocs_page_input_path = "api.md";
    var mkdocs_page_url = "/api/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> RSPET</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">Home</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../goals/">Goals</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../deploy/">Deployment</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../cli/">CLI Commands</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../plug_ins/">Plug-ins</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../execution_model/">Execution Model</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../code_structure/">Code Structure</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../dev/">Developing Plug-ins</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href="./">API</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#server-api">Server API</a></li>
                
                    <li><a class="toctree-l4" href="#using-rspet-servers-api">Using RSPET Server's API</a></li>
                
                    <li><a class="toctree-l4" href="#apis-functions">API's Functions</a></li>
                
                    <li><a class="toctree-l4" href="#rspet-servers-returncodes">RSPET Server's ReturnCodes</a></li>
                
                    <li><a class="toctree-l4" href="#sample-code">Sample code</a></li>
                
            
            </ul>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../REST_API/">RESTful WebAPI</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../contribute/">Contributing</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../faq/">FAQ</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">RSPET</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>API</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="server-api">Server API</h1>
<p>This guide aims to help you utilize RSPET Server&rsquo;s API to create programs that
interface with it. It will focus on the higher level API (as you can also manually
create and interface each class on a lower level). Because this API was created
with the upcoming RESTful WebAPI in mind it is stateless. This means that the
developer will have to deal with the states, although state transitions that would
normally take place are exposed through the API.</p>
<h2 id="using-rspet-servers-api">Using RSPET Server&rsquo;s API</h2>
<p>In order to access RSPET Server&rsquo;s API you have to include <code>rspet_server.py</code>.
Following this you have to create an instance of the rspet_server.API Class. This
will in turn create an instance of the Server class. The previous steps will have
a result equal to lunching RSPET&rsquo;s Server directly from a command line.</p>
<h2 id="apis-functions">API&rsquo;s Functions</h2>
<table>
<thead>
<tr>
<th align="center">Function</th>
<th align="center">Description</th>
<th align="center">Arguments</th>
<th align="center">Returns</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><strong>init</strong></td>
<td align="center">Called during instance creation</td>
<td align="center">-</td>
<td align="center">Raises socket.error if there is an error during binding</td>
</tr>
<tr>
<td align="center">call_plugin</td>
<td align="center">Call a command defined in a plug-in</td>
<td align="center">command(string), args(array)</td>
<td align="center">Dictionary. Keys : <code>'transition'</code>, <code>'code'</code>, <code>'sting'</code></td>
</tr>
<tr>
<td align="center">select</td>
<td align="center">Manage host selection</td>
<td align="center">hosts(array)</td>
<td align="center">Dictionary, contains transition, code and sting</td>
</tr>
<tr>
<td align="center">help</td>
<td align="center">Return all available Commands, their syntax and their documentation</td>
<td align="center">-</td>
<td align="center">Dictionary. Command is Key. Unfolds to Dictionary. Keys : <code>'help'</code>, <code>'syntax'</code>, <code>'states'</code></td>
</tr>
<tr>
<td align="center">refresh</td>
<td align="center">Interfaces Server&rsquo;s clean function. Checks for lost hosts.</td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr>
<td align="center">get_server</td>
<td align="center">Return the API&rsquo;s instance of Serve. Used for lower level interaction.</td>
<td align="center">-</td>
<td align="center">Instance of Server class</td>
</tr>
<tr>
<td align="center">get_hosts</td>
<td align="center">Return all available hosts</td>
<td align="center">-</td>
<td align="center">Dictionary. Host ID is key. Unfolds to Dictionary. Keys : <code>'ip'</code>, <code>'port'</code>, <code>'version'</code>, <code>'type'</code></td>
</tr>
</tbody>
</table>
<h2 id="rspet-servers-returncodes">RSPET Server&rsquo;s ReturnCodes</h2>
<p>RSPET&rsquo;s Server module has a class containing the Return codes that command execution
can result in. They are accessible under rspet_server.ReturnCodes.<CodeName>. The
Return Codes currently available are the following.</p>
<table>
<thead>
<tr>
<th align="center">Code Name</th>
<th align="center">Value (Int)</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">OK</td>
<td align="center">0</td>
</tr>
<tr>
<td align="center">InvalidSyntax</td>
<td align="center">1</td>
</tr>
<tr>
<td align="center">SocketError</td>
<td align="center">2</td>
</tr>
<tr>
<td align="center">LocalAccessError</td>
<td align="center">3</td>
</tr>
<tr>
<td align="center">RemoteAccessError</td>
<td align="center">4</td>
</tr>
<tr>
<td align="center">OutOfScope</td>
<td align="center">5</td>
</tr>
<tr>
<td align="center">CommandNotFound</td>
<td align="center">6</td>
</tr>
<tr>
<td align="center">InvalidHostID</td>
<td align="center">7</td>
</tr>
</tbody>
</table>
<h2 id="sample-code">Sample code</h2>
<p>Now, let&rsquo;s have a look at some sample code. Create a new python project in the same
directory as <code>rspet_server.py</code> (let&rsquo;s call it <code>api_test.py</code>).</p>
<pre><code class="py">    import rspet_server

    rspet_api = rspet_server.API()
    output = rspet_api.call_plugin(&quot;help&quot;)
    state_transition = output['transition']
    return_code = output['code']
    return_string = output['string']
    if return_code != rspet_server.ReturnCodes.OK:
      print (&quot;Ooops. I've got an error. It says :\n%s&quot; %return_string)
    else:
      print return_string
</code></pre>

<p>Executing the above code will give us the following output.</p>
<pre><code>    Server commands:
    Quit: Quit the CLI and terminate the server.
    ALL: Select all hosts.
    help: List commands available in current state or provide syntax for a command.
    Choose_Host: Select a single host.
    List_Hosts: List all connected hosts.
    Select: Select multiple hosts.
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../REST_API/" class="btn btn-neutral float-right" title="RESTful WebAPI">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../dev/" class="btn btn-neutral" title="Developing Plug-ins"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../dev/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../REST_API/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
