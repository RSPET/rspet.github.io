<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <title>Developing Plug-ins - RSPET</title>
  

  <link rel="shortcut icon" href="../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Developing Plug-ins";
    var mkdocs_page_input_path = "dev.md";
    var mkdocs_page_url = "/dev/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> RSPET</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">Home</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../goals/">Goals</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../deploy/">Deployment</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../cli/">CLI Commands</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../plug_ins/">Plug-ins</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../execution_model/">Execution Model</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../code_structure/">Code Structure</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href="./">Developing Plug-ins</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#developing-plug-ins">Developing Plug-ins</a></li>
                
                    <li><a class="toctree-l4" href="#what-it-is">What it is</a></li>
                
                    <li><a class="toctree-l4" href="#your-checklist">Your Checklist</a></li>
                
                    <li><a class="toctree-l4" href="#going-deeper">Going Deeper</a></li>
                
                    <li><a class="toctree-l4" href="#server-object">Server Object</a></li>
                
                    <li><a class="toctree-l4" href="#host-object">Host Object</a></li>
                
            
            </ul>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../contribute/">Contributing</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../faq/">FAQ</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">RSPET</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Developing Plug-ins</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="developing-plug-ins">Developing Plug-ins</h1>
<p>This guide aims to provide help to those developing Plug-ins for RSPET. Before
you start it would be good to use the program a bit (in order to have a level
of familiarity with it's execution flow) and to have a look at RSPET's
<a href="../execution_model">Execution Model</a> which covers most of the needed background.</p>
<h2 id="what-it-is">What it is</h2>
<p>A Plug-in for RSPET is a python file and more specifically a library (meaning it
is imported).</p>
<h2 id="your-checklist">Your Checklist</h2>
<p>Your plug-in needs to do the following :</p>
<ul>
<li>import the plug-in framework</li>
</ul>
<pre><code class="py">    from Plugins.mount import Plugin
</code></pre>

<ul>
<li>create a class inheriting from <code>Plugin</code> e.g.:</li>
</ul>
<pre><code class="py">    class Essentials(Plugin):
      &quot;&quot;&quot;
      Class expanding Plugin.
      &quot;&quot;&quot;
      __server_commands__ = {}
      __cmd_help__ = {}
</code></pre>

<h2 id="going-deeper">Going Deeper</h2>
<p>Now in order for your plug-in to help a user it has to offer CLI commands. To do
that, in the class created above create an <strong>init</strong> function. Inside this function
create a new entry to <code>__server_commands__</code> Dictionary with your command's name
as an index and an array as a value. Said array should have the function that
executes the code as it's first value and the state's in which the command should
be available in as the rest. Finally, create a new entry to <code>__cmd_help__</code>
Dictionary with your command's name as an index and a string containing the
command's syntax. Let's see how this is done with the core command <code>help</code>:</p>
<pre><code class="py">    class Essentials(Plugin):
      &quot;&quot;&quot;
      Class expanding Plugin.
      &quot;&quot;&quot;
      __server_commands__ = {}
      __cmd_help__ = {}

      def __init__(self):
        &quot;&quot;&quot;
        Declare plugin's CLI commands their syntax and their scope.
        &quot;&quot;&quot;
        self.__server_commands__[&quot;help&quot;] = [self.help, &quot;basic&quot;, &quot;connected&quot;, &quot;multiple&quot;]
        self.__cmd_help__[&quot;help&quot;] = &quot;help [command]&quot;

      def help(self, server, args): #Note that all functions should take those arguments.
        &quot;&quot;&quot;List commands available in current state or provide syntax for a command.&quot;&quot;&quot;
        #Do stuff to print help
        return None #Here you return the desired transition. None takes no &quot;&quot; the rest do.
</code></pre>

<p>Let's notice a few more things on the previous example. First we see the arguments
passed to help, the first one (ignoring self) is server which an instance of a
<a href="#server-object">Server Object</a>. The second one is args, which is an array of
the arguments the user provided to our command. The number and the validity of
the arguments SHOULD be checked (for missing arguments, type miss-match etc). The
second thing we notice is the functions docstring, when help displays a list of
available commands to the user, it will couple your command with it's docstring
as a description.</p>
<h2 id="server-object">Server Object</h2>
<p>In order to communicate with RSPET's server, a plug-in has to interface with an
instance of a Server Object. In order to achieve that the class exposes the following
functions.</p>
<h3 id="select">select</h3>
<p>Desc : Selects given host(s) based on ids.</p>
<p>Args : ids (optional)</p>
<h3 id="get_selected">get_selected</h3>
<p>Desc : Interface function. Return selected <a href="#host-object">hosts</a>.</p>
<p>Args : -</p>
<h3 id="get_hosts">get_hosts</h3>
<p>Desc : Interface function. Return all <a href="#host-object">hosts</a>.</p>
<p>Args : -</p>
<h3 id="execute">execute</h3>
<p>Desc : Execute function on all selected client objects.</p>
<p>Args : cmd, args</p>
<h3 id="clean">clean</h3>
<p>Desc : Remove hosts taged for deletion and unselect all selected hosts.</p>
<p>Args : -</p>
<h3 id="quit">quit</h3>
<p>Desc : Interface function. Raise a Quit signal.</p>
<p>Args : -</p>
<h2 id="host-object">Host Object</h2>
<p>Each instance of the Host Object represents a connected client. When a host is
acquired (through either <a href="#get_hosts">get_hosts</a> or <a href="#get_selected">get_selected</a>)
it too exposes some functions to help plug-in developers Interface with RSPET.</p>
<h3 id="trash">trash</h3>
<p>Desc : Gracefully delete host.</p>
<p>Args : -</p>
<h3 id="purge">purge</h3>
<p>Desc : Delete host not so gracefully.</p>
<p>Args : -</p>
<h3 id="send">send</h3>
<p>Desc : Send message to host</p>
<p>Args : msg(string)</p>
<h3 id="recv">recv</h3>
<p>Desc : Receive from host</p>
<p>Args : size (int)</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../contribute/" class="btn btn-neutral float-right" title="Contributing">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../code_structure/" class="btn btn-neutral" title="Code Structure"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../code_structure/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../contribute/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
